(this["webpackJsonphrm-system"]=this["webpackJsonphrm-system"]||[]).push([[14],{1026:function(e,t,a){"use strict";a.r(t);var n=a(11),c=a(0),s=a.n(c),l=a(703),r=a.n(l),o=a(1027),i=a(566),d=(a(43),a(393)),j=a(36),b=a.p+"static/media/logo.c5af5fe1.png",h=(a.p,a(1)),u=Object(o.a)({root:{display:"flex",alignItems:"center"},menuButton:{marginRight:"16px"}}),x=function(e){var t=u();return console.log("Header Rerendered"),Object(h.jsxs)("header",{className:"".concat(r.a.header," ").concat(e.styleClass),children:[Object(h.jsx)("div",{className:"btn-toggle ".concat(t.menuButton),onClick:function(){return e.handleToggleSidebar(e.toggled)},children:Object(h.jsx)(d.a,{})}),Object(h.jsx)("div",{className:"d-flex align-items-center",children:Object(h.jsx)("div",{className:"btn-collapse",onClick:function(){return e.handleCollapse(e.collapsed)},children:Object(h.jsx)(d.a,{})})}),Object(h.jsx)(j.c,{to:"".concat(e.collapsed?"#":"/main"),children:Object(h.jsx)("img",{src:b,alt:"logo",width:"100%",style:{maxHeight:"55px",transition:"all ease-in-out 0.3s"}})}),Object(h.jsx)("div",{className:r.a.user__profile__data,children:Object(h.jsx)(i.a,{})})]})},m=a(715),g=a(719),p=a(61),O=(a(716),a(3)),_=a(717),f=a.n(_),v=a(718),y=a.n(v),C=[{text:"Dashboard",path:"/main/home/dashboard",roles:["user","admin"]}],k=[{text:"Setup Forms",path:"/main/admin-settings/setup-forms",roles:["HRM_ADM"]}],S=[{text:"Users",path:"/main/users/",roles:["user","hirer","guard","admin"]}],w=a(978),N=[{text:"Home",Icon:Object(h.jsx)(f.a,{}),path:"/main/home",roles:["user","hirer","guard","admin","ADM"],sublinks:C},{text:"Users",Icon:Object(h.jsx)(w.a,{}),path:"/main/users",roles:["user","hirer","guard","admin","ORIC_CP"],sublinks:S},{text:"Admin",Icon:Object(h.jsx)(y.a,{}),path:"/main/admin-settings",roles:["user","hirer","guard","admin","ADM"],sublinks:k}],I=N,A=function(e){var t=e.rtl,a=e.toggled,n=e.handleToggleSidebar,c=e.styleClass,s=e.collapsed,l=(e.handleCollapse,e.user),r=Object(O.h)();return Object(h.jsx)("div",{className:c,children:Object(h.jsxs)(m.c,{rtl:t,toggled:a,breakPoint:"md",onToggle:n,collapsed:s,children:[Object(h.jsxs)(m.d,{children:[I&&I.map((function(e,t){return Object(h.jsx)(h.Fragment,{children:["user","hirer","guard","admin"].includes(null===l||void 0===l?void 0:l.role)&&e.roles.includes(null===l||void 0===l?void 0:l.role)?Object(h.jsx)(m.a,{iconShape:"circle",children:e.sublinks.length>0?Object(h.jsx)(m.f,{icon:e.Icon,title:e.text,"data-element":r.pathname,children:e.sublinks.map((function(e,t){if("ADM"!==e.roles[0])return Object(h.jsx)(m.b,{children:Object(h.jsx)(j.c,{to:e.path,activeClassName:"nav-link-active",children:e.text})},t)}))}):Object(h.jsx)(m.b,{icon:e.Icon,children:Object(h.jsx)(j.c,{to:e.path,activeClassName:"nav-link-active",children:e.text})})},t):Object(h.jsx)(p.a,{})})})),Object(h.jsx)(m.a,{iconShape:"circle",children:Object(h.jsx)(m.b,{icon:Object(h.jsx)(g.a,{}),children:Object(h.jsx)(j.c,{exact:!0,to:"/logout",children:"Log Out"})})})]}),Object(h.jsx)(m.e,{children:Object(h.jsx)(m.a,{iconShape:"circle",children:Object(h.jsx)(m.b,{icon:Object(h.jsx)(g.a,{}),children:Object(h.jsx)(j.c,{exact:!0,to:"/logout",children:"Log Out"})})})})]})})},F=a(720),T=a.n(F),D=a(27),z=a(180),B=a(575),E=s.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(4),a.e(17),a.e(15)]).then(a.bind(null,1028))})),H=s.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(10),a.e(12)]).then(a.bind(null,1024))})),P=s.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(9)]).then(a.bind(null,1025))})),M=function(e){var t=Object(O.j)(),a=s.a.useState(!0),c=Object(n.a)(a,2),l=c[0],r=c[1],o={role:localStorage.getItem("role")},i=[T.a.body__content];l?i.push(T.a.sidebar__expanded):i.push(T.a.sidebar__collapsed);return Object(h.jsxs)("div",{className:"".concat(e.styleClass," ").concat(T.a.body__content__wrapper),children:[Object(h.jsx)(A,{styleClass:T.a.sidebar,toggler:function(e){r(e)},user:o,collapsed:e.collapsed,handleCollapse:e.handleCollapse,toggled:e.toggled,handleToggleSidebar:e.handleToggleSidebar}),Object(h.jsx)("div",{className:i.join(" ").toString(),children:Object(h.jsx)(z.a,{height:"100%",children:Object(h.jsx)(s.a.Suspense,{fallback:Object(h.jsx)(D.a,{}),children:["user","hirer","guard","admin"].includes(null===o||void 0===o?void 0:o.role)?Object(h.jsxs)(O.d,{children:[Object(h.jsx)(O.b,{exact:!0,path:"".concat(t.url),render:function(){return Object(h.jsx)(O.a,{from:"".concat(t.url),to:"".concat(t.url,"/home")})}}),Object(h.jsx)(O.b,{path:"".concat(t.url,"/admin-settings"),component:H}),Object(h.jsx)(O.b,{path:"".concat(t.url,"/enable-2fa"),component:B.a}),Object(h.jsx)(O.b,{path:"".concat(t.url,"/home"),render:function(){return Object(h.jsx)(E,{user:o})}}),Object(h.jsx)(O.b,{path:"".concat(t.url,"/users"),component:P})]}):null})})})]})},R=a(722),J=a.n(R);t.default=function(){var e=s.a.useState(!0),t=Object(n.a)(e,2),a=t[0],c=t[1],l=s.a.useState(!1),r=Object(n.a)(l,2),o=r[0],i=r[1],d=function(e){c(!e)},j=function(e){i(!e)};return Object(h.jsxs)("div",{className:"".concat(J.a.grid__wrapper," app"),children:[Object(h.jsx)(x,{styleClass:J.a.header,collapsed:a,handleCollapse:d,toggled:o,handleToggleSidebar:j}),Object(h.jsx)(M,{styleClass:J.a.body__content,collapsed:a,handleCollapse:d,toggled:o,handleToggleSidebar:j})]})}},180:function(e,t,a){"use strict";a(0);var n=a(1050),c=a(721),s=a.n(c),l=a(1);t.a=function(e){var t,a;return Object(l.jsx)("div",{className:s.a.padder,style:{height:null!==(t=e.height)&&void 0!==t?t:"100%",overflowY:"auto"},children:Object(l.jsx)(n.a,{className:s.a.card,sx:{width:null!==(a=e.width)&&void 0!==a?a:"100%",height:"100%",overflowY:"auto"},children:e.children})})}},566:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(11),c=a(0),s=a.n(c),l=a(1043),r=a(1037),o=a(885),i=a(1049),d=a(977),j=a(976),b=a(1045),h=a(1044),u=a(713),x=a.n(u),m=a(568),g=a.n(m),p=a(714),O=a.n(p),_=a(36),f=(a(43),a(1038)),v=a(1);function y(){var e,t,a,c=s.a.useState(null),u=Object(n.a)(c,2),m=u[0],p=u[1],y=s.a.useState(!1),C=Object(n.a)(y,2),k=(C[0],C[1],Boolean(m)),S=function(){p(null)};return Object(v.jsxs)(s.a.Fragment,{children:[Object(v.jsx)(l.a,{sx:{display:"flex",alignItems:"center",textAlign:"center"},children:Object(v.jsx)(h.a,{title:"Profile Information",children:Object(v.jsx)(b.a,{onClick:function(e){p(e.currentTarget)},size:"small",sx:{ml:2},children:Object(v.jsx)(r.a,{sx:{width:32,height:32},children:Object(v.jsx)(g.a,{fontSize:"small"})})})})}),Object(v.jsxs)(o.a,{anchorEl:m,open:k,onClose:S,onClick:S,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",width:"300px",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(v.jsxs)("div",{className:"d-flex flex-column align-items-centre justify-content-center",children:[Object(v.jsxs)("div",{className:"d-flex align-items-center justify-content-between p-2",children:[Object(v.jsx)("strong",{children:"Name: "}),Object(v.jsx)("p",{className:"m-0 ",style:{color:"var(--primary-color)"},children:null!==(e=localStorage.getItem("name"))&&void 0!==e?e:"-"})]}),Object(v.jsxs)("div",{className:"d-flex align-items-center justify-content-between p-2",children:[Object(v.jsx)("strong",{children:"Email: "}),Object(v.jsx)("p",{className:"m-0 ",style:{color:"var(--primary-color)"},children:null!==(t=localStorage.getItem("email"))&&void 0!==t?t:"-"})]}),Object(v.jsxs)("div",{className:"d-flex align-items-center justify-content-between p-2",children:[Object(v.jsx)("strong",{children:"User ID: "}),Object(v.jsx)("p",{className:"m-0 ",style:{color:"var(--primary-color)"},children:null!==(a=localStorage.getItem("id"))&&void 0!==a?a:"-"})]})]}),Object(v.jsx)(j.a,{}),Object(v.jsx)(_.c,{to:"/main/home/enable-2fa",children:Object(v.jsxs)(i.a,{children:[Object(v.jsx)(d.a,{children:Object(v.jsx)(x.a,{fontSize:"small"})}),"2FA Authentication"]})}),Object(v.jsx)(j.a,{}),Object(v.jsx)(_.c,{to:"/logout",children:Object(v.jsxs)(i.a,{children:[Object(v.jsx)(d.a,{children:Object(v.jsx)(O.a,{fontSize:"small"})}),"Logout"]})})]}),Object(v.jsx)(f.a,{})]})}},575:function(e,t,a){"use strict";var n=a(15),c=a(20),s=a(11),l=a(0),r=a.n(l),o=a(43),i=a(6),d=a(1);t.a=function(){var e=Object(l.useState)(1),t=Object(s.a)(e,2),a=t[0],j=t[1],b=Object(l.useState)(""),h=Object(s.a)(b,2),u=h[0],x=h[1],m=Object(l.useState)(localStorage.getItem("is2FAEnabled")),g=Object(s.a)(m,2),p=g[0],O=g[1],_=r.a.useCallback(Object(c.a)(Object(n.a)().mark((function e(){var t,a,c,s,l,r,d,j,b,h;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={email:localStorage.getItem("email"),password:"password1",token2FA:u},console.log("==========================",t),e.next=5,Object(o.f)("/auth/login/verify2FAToken",t);case 5:200===(null===(a=e.sent)||void 0===a?void 0:a.status)&&(console.log("\ud83d\ude80 ~ file: TwoFactorAuthentication.jsx:38 ~ response:",a),localStorage.setItem("token",null===a||void 0===a||null===(c=a.data)||void 0===c||null===(s=c.tokens)||void 0===s||null===(l=s.access)||void 0===l?void 0:l.token),localStorage.setItem("refreshToken",null===a||void 0===a||null===(r=a.data)||void 0===r||null===(d=r.tokens)||void 0===d||null===(j=d.refresh)||void 0===j?void 0:j.token),localStorage.setItem("is2FAEnabled",null===a||void 0===a||null===(b=a.data)||void 0===b||null===(h=b.user)||void 0===h?void 0:h.is2FAEnabled),Object(i.a)("2FA Authentication Enabled!","success")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0,"error"),Object(i.a)(e.t0.message,"error");case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[u]);return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h2",{className:"title",children:"Enable Two Factor Authentication"}),Object(d.jsxs)("div",{className:"form",children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("input",{type:"checkbox",id:"enable-2fa",onChange:!p&&function(e){O(e.target.checked),j(1===a?2:1)},checked:p}),Object(d.jsx)("label",{htmlFor:"enable-2fa",children:"Enable Two Factor Authentication"})]}),!p&&Object(d.jsxs)(d.Fragment,{children:[2===a&&Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("img",{src:localStorage.getItem("2FA_qrCode"),alt:"QR code"}),Object(d.jsx)("p",{children:"Scan this QR code with your authentication app."})]}),3===a&&Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"code",children:"Enter the 6-digit code:"}),Object(d.jsx)("input",{type:"text",id:"code",maxLength:6,value:u,onChange:function(e){x(e.target.value)}})]}),Object(d.jsxs)("div",{className:"form-actions",children:[2===a&&Object(d.jsx)("button",{className:"btn",onClick:function(){return j(3)},children:"Next"}),3===a&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:"btn",onClick:_,children:"Activate"}),Object(d.jsx)("button",{className:"btn",onClick:function(){return j(1)},children:"Cancel"})]})]})]})]})]})}},703:function(e,t,a){e.exports={header:"Header_header__3QVI_",logo:"Header_logo__17IIW",search__bar:"Header_search__bar__3KywC",user__profile__data:"Header_user__profile__data__9bBFB"}},716:function(e,t,a){},720:function(e,t,a){e.exports={body__content__wrapper:"BodyContent_body__content__wrapper__2XhKo",sidebar:"BodyContent_sidebar__2AfCZ",body__content:"BodyContent_body__content__bhvgE",sidebar__expanded:"BodyContent_sidebar__expanded__1yb66",sidebar__collapsed:"BodyContent_sidebar__collapsed__2nsdz"}},721:function(e,t,a){e.exports={padder:"Card_padder__2JrI7",card:"Card_card__1JJwt"}},722:function(e,t,a){e.exports={grid__wrapper:"Dashboard_grid__wrapper__19XHY",header:"Dashboard_header__3uhxQ",sidebar:"Dashboard_sidebar__1Fs0i",body__content:"Dashboard_body__content__b5DrU",footer:"Dashboard_footer__hagPZ"}}}]);
//# sourceMappingURL=14.8b3a5f73.chunk.js.map